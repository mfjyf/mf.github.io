<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Document</title>
    <link rel="stylesheet" href="css/box1.css">
    <link rel="stylesheet" href="css/box2.css">
    <link rel="stylesheet" href="css/box3.css">
    <link rel="stylesheet" href="css/box4.css">
    <link rel="stylesheet" href="css/box5.css">
    <style>
        * {
            padding: 0px;
            margin: 0px;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
            width: 100%;
        }

        #bigbox {
            height: 100%;
            width: 100%;
            position: relative;
        }

        .active {
            z-index: -1;
            opacity: 0;
        }

        /*************************************/


       
    </style>
</head>

<body>
    <div id="bigbox">
        <div class="abox1">
            <img src="img/picture.png">
            <img src="img/logoing.png">
            <img src="img/点.png">
            <img src="img/点.png">
            <img src="img/点.png">
        </div>
        <div class="box abox2 active">
            <img src="img/拖拉机.png">
            <img src="img/左轮.png">
            <img src="img/右轮.png">
            <img src="img/拖拉机背景.png">
            <img src="img/字框.png">
            <img src="img/第一句.png" class="font">
            <img src="img/第二句.png" class="font">
            <img src="img/第三句.png" class="font">
            <img src="img/第四句.png" class="font">
            <img src="img/第五句.png" class="font">
            <img src="img/第六句.png" class="font">
            <img src="img/番薯和阴影.png">
            <p class="triangle v">v</p>
            <p class="triangle">v</p>
        </div>
        <div class="box abox3 active">
            <img class="abox3active" src="img/上人.png">
            <img class="abox3active" src="img/上话.png">
            <img class="abox3active" src="img/下人.png">
            <img class="abox3active" src="img/下话.png">
            <p class="triangleTwo v1">v</p>
            <p class="triangleTwo v2">v</p>
        </div> 
        <div class="box abox4 active">
            <img src="img/4圆.png">
            <img class="abox4active" src="img/4番薯.png">
            <img class="abox4active" src="img/4谷.png">
            <img class="abox4active" src="img/4农民.png">
            <img class="abox4active" src="img/4话.png">
            <form class="abox4active" name="myform">
                <input id="inputtext" type="text" name="username" placeholder="输入姓名" value="">

                <select>
                    <option hidden>选择职业</option>  
                    <option>上班族</option>
                    <option>学生</option>
                </select>
               
            </form>
            <img onclick="toNext()" class="abox4active" src="img/4按钮.png">
        </div>

        <div class="box abox5 active">
            <div id="panel">
                <!-- <p>请点击按键</p>
                <p>开始计算</p> -->
            </div>
            <div id="buttons">
                <table>
                    <tr>
                        <td class="bean" onclick="beanbackground(this)">大豆</td>
                        <td class="bean" onclick="beanbackground(this)">绿豆</td>
                        <td class="bean" onclick="beanbackground(this)">红豆</td>
                        <td class="special" onclick="beanbackground2(this)">AC</td>
                    </tr>
                    <tr>
                        <td class="bean" onclick="beanbackground(this)">稻子</td>
                        <td class="bean" onclick="beanbackground(this)">玉米</td>
                        <td class="bean" onclick="beanbackground(this)">黑豆</td>
                        <td class="special" onclick="beanbackground2(this)">+</td>
                    </tr>
                    <tr>
                        <td class="bean" onclick="beanbackground(this)">素食</td>
                        <td class="bean" onclick="beanbackground(this)">米粉</td>
                        <td class="bean" onclick="beanbackground(this)">煎饼</td>
                        <td class="special" onclick="beanbackground2(this)">=</td>
                    </tr>
                </table>
            </div>
        </div>

    </div>

    <script>
        var pageNum = 1;
        var pageTotal = 4;
        var startY = 0,
            endY = 0,
            moveY = 0;

        var boxs = document.getElementsByClassName("box");
        // alert(boxs[0].attributes['class'].nodeValue)
        for (var i = 0; i < boxs.length; i++) {

            boxs[i].addEventListener('touchstart', function (e) {
                startY = e.targetTouches[0].pageY;
                console.log(startY)
            }, false)

            boxs[i].addEventListener('touchmove', function (e) {
                e.preventDefault();
                console.log(e.targetTouches[0].pageY)
                endY = e.targetTouches[0].pageY
            }, false)

            if(boxs[i].className.indexOf('abox2') != -1){
                boxs[i].addEventListener('touchend', function (e) {
                    moveY = startY - endY;
                    console.log(moveY);
                    if (!(moveY == startY)) {
                        if (moveY > 120) {
                            console.log('下一页')
                            document.getElementsByClassName('abox' + pageNum)[0].classList.add('active');

                            var abox3s = document.getElementsByClassName('abox3active');
                            for(var i = 0;i < abox3s.length;i++){
                                abox3s[i].classList.add('toleft' + i);
                            }

                            var triangleTwos = document.getElementsByClassName('triangleTwo');
                            for(var i = 0;i < triangleTwos.length;i++){
                                triangleTwos[i].classList.add('tractive' + i);
                            }

                            if (!(pageNum >= pageTotal)) {
                                pageNum++;
                            }
                            document.getElementsByClassName('abox' + pageNum)[0].classList.remove('active');
                        }
                    } else {
                        return;
                    }
                    startY = 0;
                    endY = 0;
                    moveY = 0;
                }, false)
            }else{
                boxs[i].addEventListener('touchend', function (e) {
                    moveY = startY - endY;
                    console.log(moveY);
                    if (!(moveY == startY)) {
                        if (moveY > 120) {
                            console.log('下一页')
                            document.getElementsByClassName('abox' + pageNum)[0].classList.add('active');
                            
                            var abox4actives = document.getElementsByClassName('abox4active');
                            for(var i = 0;i < abox4actives.length;i++){
                                abox4actives[i].classList.add('box4active' + i);
                            }

                            if (!(pageNum >= pageTotal)) {
                                pageNum++;
                            }
                            document.getElementsByClassName('abox' + pageNum)[0].classList.remove('active');
                        }
                    } else {
                        return;
                    }
                    startY = 0;
                    endY = 0;
                    moveY = 0;
                }, false)
            }
            

        }


        function toNext(){
            document.getElementsByClassName('abox4')[0].classList.add('active');
            document.getElementsByClassName('abox5')[0].classList.remove('active');
        }


        function beanbackground(e){
            e.classList.add('abox5hoveractive')
        }
        function beanbackground2(e){
            e.classList.remove('special')
            e.classList.add('abox5hoveractive')
            setTimeout(() => {
                e.classList.remove('abox5hoveractive')
                e.classList.add('special')
            }, 200);
          
        }
        setTimeout(function () {
            document.getElementsByClassName('abox' + pageNum)[0].classList.add('active');
            var fonts = document.getElementsByClassName('font');
            for (var i = 0; i < fonts.length; i++) {
                fonts[i].classList.add('fontactive' + i);
            }
            var vs = document.getElementsByClassName('triangle');
            for (var i = 0; i < vs.length; i++) {
                vs[i].classList.add('tractive' + i);
            }
            if (!(pageNum >= pageTotal)) {
                pageNum++;
            }
            document.getElementsByClassName('abox' + pageNum)[0].classList.remove('active');
        }, 1000)
    </script>

</body>

</html>